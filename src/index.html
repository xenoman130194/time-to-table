<!-- This file is part of time-to-table -->
<!-- SPDX-License-Identifier: GPL-3.0-or-later -->

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self'; img-src 'self' data:; connect-src 'self' ipc: https://ipc.localhost">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta http-equiv="Strict-Transport-Security" content="max-age=63072000; includeSubDomains; preload">
    <meta name="csrf-token" content="" id="csrfMeta">
    <title>Time-To-Table v0.6.4 (–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–ª—è –ª–µ–Ω–∏–≤—ã—Ö)</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<div class="card">
    <div class="header-row">
        <h2>
            Time-To-Table (–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–ª—è –ª–µ–Ω–∏–≤—ã—Ö)
            <span>v0.6.4 by –ì–∞–ª–∏–º–∑—è–Ω–æ–≤ –ì.–†.</span>
        </h2>
        <div class="btn-group-row">
            <button class="btn-sm" id="aboutBtn">–û –ü—Ä–æ–≥—Ä–∞–º–º–µ</button>
            <button class="btn-sm" id="clearBtn">–û—á–∏—Å—Ç–∏—Ç—å</button>
            <button class="btn-sm" id="importBtn">–ò–º–ø–æ—Ä—Ç (JSON)</button>
            <button class="btn-sm" id="exportBtn">–≠–∫—Å–ø–æ—Ä—Ç (JSON)</button>
            <input type="file" id="fileInput" accept=".json">
        </div>
    </div>

    <div class="setup-grid">
        <div class="input-group">
            <label for="techCardSelect">–¢–µ—Ö–∫–∞—Ä—Ç–∞ (–®–∞–±–ª–æ–Ω)</label>
            <div>
                <select id="techCardSelect">
                    <option value="manual">-- –†—É—á–Ω–æ–π –≤–≤–æ–¥ --</option>
                    <optgroup label="–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ" id="userCards"></optgroup>
                </select>
                <button class="btn-sm" id="saveCardBtn">üíæ</button>
                <button class="btn-sm" id="deleteCardBtn">‚úñ</button>
            </div>
        </div>
        <div class="input-group"><label for="startDate">–î–∞—Ç–∞ –ù–∞—á–∞–ª–∞</label><input type="date" id="startDate"></div>
        <div class="input-group"><label for="startTime">–í—Ä–µ–º—è –ù–∞—á–∞–ª–∞</label><input type="time" id="startTime" step="1" value="08:00:00"></div>
        
        <div class="input-group">
            <fieldset style="border:none; padding:0; margin:0;">
                <legend style="font-weight:600; margin-bottom:6px;">–†–µ–∂–∏–º</legend>
                <div class="checkbox-group">
                    <input type="checkbox" id="chainMode" checked>
                    <label for="chainMode">–¶–µ–ø–æ—á–∫–∞</label>
                </div>
            </fieldset>
        </div>

        <div class="lunch-row">
            <div class="lunch-field">
                <label for="lunchStart">–û–±–µ–¥ 1 (12:00)</label>
                <input type="time" id="lunchStart" value="12:00">
            </div>
            <div class="lunch-field">
                <label for="lunchStart2">–û–±–µ–¥ 2 (00:00)</label>
                <input type="time" id="lunchStart2" value="00:00">
            </div>
            <div class="lunch-duration">
                <label for="lunchDur">–û–±–µ–¥ (–º–∏–Ω)</label>
                <input type="number" id="lunchDur" value="45" min="0" max="480" step="5">
            </div>
        </div>

        <div class="input-group"><label for="totalOps">–ö–æ–ª-–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π</label><input type="number" id="totalOps" min="1" max="50" value="1"></div>
        <div class="input-group">
            <label for="workerCount">–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π</label>
            <div class="worker-split-row">
                <input type="number" id="workerCount" min="1" max="20" value="1">
                <button class="btn-sm" id="setWorkersBtn">–ó–ê–î–ê–¢–¨</button>
            </div>
        </div>
        
        <div class="input-group">
            <label for="timeMode">–¢–∏–ø –∑–∞–¥–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏</label>
            <select id="timeMode">
                <option value="per_worker">–ù–∞ –∫–∞–∂–¥–æ–≥–æ</option>
                <option value="total" selected>–û–±—â–µ–µ</option>
            </select>
        </div>
        
        <div class="input-group"><label for="resIz">R–∏–∑ (–ú–æ–º)</label><input type="text" id="resIz" placeholder="..." maxlength="100"></div>
        <div class="input-group"><label for="coefK">–ö–æ—ç—Ñ. K</label><input type="text" id="coefK" placeholder="..." maxlength="100"></div>
    </div>

    <div class="text-fields-row">
        <div class="input-group"><label for="statusBefore">–°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–æ —Ä–µ–º–æ–Ω—Ç–∞ (–ø.1)</label><input type="text" id="statusBefore" value="–∑–∞–º–µ—á–∞–Ω–∏–π –Ω–µ—Ç" maxlength="500"></div>
        <div class="input-group"><label for="workExtra">–î–æ–ø. —Ä–∞–±–æ—Ç—ã (–ø.3)</label><input type="text" id="workExtra" value="–Ω–µ—Ç" maxlength="500"></div>
        <div class="input-group"><label for="devRec">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (–ø.5)</label><input type="text" id="devRec" value="–Ω–µ—Ç" maxlength="500"></div>
    </div>

    <div id="fieldsContainer"></div>
    <button class="btn-main" id="generateBtn">–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫ –∏ –æ—Ç—á–µ—Ç</button>
</div>

<div id="tableResult" class="tables-container"></div>
<div id="z7Result" class="tables-container"></div>

<div class="history-section" id="historyBlock">
    <div class="history-controls">
        <h3>–ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—á–µ—Ç–æ–≤ (–°–µ—Å—Å–∏—è)</h3>
        <div class="history-actions">
            <button class="btn-sm" id="clearHistoryBtn">–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
            <div class="export-wrapper">
                <button class="btn-sm" id="exportExcelBtn">–°–∫–∞—á–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é (.xls)</button>
                <span class="excel-note">‚ö†Ô∏è –§–∞–π–ª –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –≤ Excel (—ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ)</span>
            </div>
        </div>
    </div>
    <div id="historyList"></div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–¥–∞–Ω–∏—è –Ω–æ–º–µ—Ä–æ–≤ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π -->
<div id="workersModal" class="modal-overlay">
    <div class="modal-content">
        <div class="modal-header">
            <h2>–ù–æ–º–µ—Ä–∞ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π</h2>
            <button class="modal-close" id="closeWorkersModal">&times;</button>
        </div>
        <div class="modal-body" id="workersModalBody">
            <p class="workers-hint">–í–≤–µ–¥–∏—Ç–µ 8-–∑–Ω–∞—á–Ω—ã–π –Ω–æ–º–µ—Ä –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è.<br>–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ—Ä—è–¥–∫–æ–≤–æ–≥–æ –Ω–æ–º–µ—Ä–∞.</p>
            <div id="workersInputList"></div>
            <div class="workers-actions">
                <button class="btn-sm" id="saveWorkersBtn" style="background:#10b981;">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button class="btn-sm" id="resetWorkersBtn" style="background:#6b7280;">–°–±—Ä–æ—Å–∏—Ç—å</button>
            </div>
        </div>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ "–û –ø—Ä–æ–≥—Ä–∞–º–º–µ" -->
<div id="aboutModal" class="modal-overlay">
    <div class="modal-content">
        <div class="modal-header">
            <h2>–û –ø—Ä–æ–≥—Ä–∞–º–º–µ</h2>
            <button class="modal-close" id="closeAboutModal">&times;</button>
        </div>
        <div class="modal-body" id="aboutModalBody">
            <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
        </div>
    </div>
</div>

<script src="main.js"></script>
</body>
</html>
